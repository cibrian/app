<!DOCTYPE html> 
<html>
<head>
<meta charset="UTF-8">
<title>Aplic. Web de jQuery Mobile</title>
<link href="jquery.mobile-1.0.min.css" rel="stylesheet" type="text/css"/>
<script src="jquery-1.6.4.min.js" type="text/javascript"></script>
<script src="jquery.mobile-1.0.min.js" type="text/javascript"></script>
<script src="cordova.js" type="text/javascript"> </script>
<script src="main.js" type="text/javascript"></script>


<script>


function agregarCliente(){
     db.transaction(agregarClienteSql, errorClientes, successClientes);
    }
	
		function agregarClienteSql(tx) {
			name = $("#Nombre").attr('value');
	       rfc = $("#RFC").attr('value');
		   
        tx.executeSql('INSERT INTO Cliente(nombre,rfc) VALUES ("'+name+'", "'+rfc+'")');
		
	$("#Nombre").val('');
	$("#RFC").val('');	
		}
		
		function actualizarCliente(){
     db.transaction(actualizarClienteSql, errorClientes, successClientes);
	 $.mobile.changePage("#page", {transition : "slide"});
    }
	
		function actualizarClienteSql(tx) {
			nameNew = $("#nombreInput").attr('value');
	       teamNew = $("#rfcInput").attr('value');
        tx.executeSql('UPDATE Cliente SET nombre="'+nameNew+'", rfc="'+teamNew+'" WHERE id='+ident+'');
		}
	
	
	 function eliminarCliente(){
     db.transaction(eliminarClienteSql, errorClientes, successClientes);
	 $.mobile.changePage("#page", {transition : "slide"});	
    }
	
		
	function eliminarClienteSql(tx) {
    tx.executeSql('DELETE FROM Cliente WHERE id='+ident+'');
	}
		
		


$('#listaClientes li').live('click', function() {
	ident=$(this).attr("id");
	db.transaction(editarCliente,errorClientes);
	$.mobile.changePage("#page3", {transition : "slide"});
});



</script>


</head> 
<body>





<div data-role="page" id="page">
  <div data-role="header" data-position="fixed" data-theme="d">
    <h1>Facturación</h1>
    <div data-role="navbar">
            <ul>
                <li><a href="#page" data-transition="none" data-icon="plus">Clientes</a></li>
                
            </ul>
        </div>
    
  </div>

  <div data-role="content">
    <label for="textfield">Información del contribuyente:</label>
    <input type="text" required id="Nombre" placeholder="*Nombre o razón social">
    <input type="text" required id="RFC" placeholder="*RFC (sin guiones)" maxlength="13">
    <label for="textfield">Ubicación del contribuyente:</label>
     <input type="text" required id="calle" placeholder="*Calle" >
     <input type="text" id="numExterior" placeholder="Núm. Ext.">
     <input type="text" id="numInterior" placeholder="Núm. Int.">
     <input type="text" id="colonia" placeholder="Colonia.">
     <input type="text" required id="cp" placeholder="*C.P.">
     <input type="text"  id="municipio" placeholder="Municipio">
     <input type="text" required id="estado" placeholder="*Estado">
     <input type="text"  id="email" placeholder="E-mail">
     
    <button onClick="agregarCliente();">Agregar</button>
<a href="#page2" data-role="button">Lista de clientes</a>

  </div>
</div>


 
<div data-role="page" id="page2">
  <div data-role="header" data-position="fixed" data-theme="d">
  <a href="#" data-icon="back" data-iconpos="left" data-rel="back" data-transition="slide" data-direction="reverse">Home</a>
  
    <h1>Clientes</h1>
  </div>
  <div data-role="content">
     <ul data-role="listview" id="listaClientes" data-filter="true" data-filter-placeholder="Buscar clientes"
     data-autodividers="true" data-split-icon="gear" data-split-theme="d">
  
    
    </ul>
    
  
    
  </div>
</div>

<div data-role="page" id="page3">
  <div data-role="header" data-position="fixed" data-theme="d">
  <a href="#" data-icon="back" data-iconpos="left" data-rel="back" data-transition="slide" data-direction="reverse">Clientes</a>
  
    <h1>Clientes</h1>
  </div>
  <div data-role="content">
    <input id="nombreInput" type="text">
     <input id="rfcInput" type="text">
     <button onClick="actualizarCliente();" >Actualizar</button>
      <button onClick="eliminarCliente();" >Eliminar</button>
    
  
    
  </div>
</div>





</body>
</html>
